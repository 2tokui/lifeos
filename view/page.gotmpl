<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>lifeos</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  </head>
  <body>
  	<nav class="navbar navbar-expand-lg bg-body-tertiary">
	  <div class="container-fluid">
	    <a class="navbar-brand" href="/">
			<svg
				fill="#000000"
				width="40px"
				height="40px"
				viewBox="0 0 14 14"
				role="img"
				focusable="false"
				aria-hidden="true">
					<path d="m 10.134766,10.26461 0.351562,0 0,0.37296 -0.351562,0 z M 9.4763125,8.90929 9.3005313,9.21374 l 0.8341877,0.48162 0,0.40249 0.351562,0 0,-0.60546 z m -3.2244375,1.35532 0.3515625,0 0,0.37296 -0.3515625,0 z M 5.5934922,8.90929 5.4177109,9.21374 l 0.8341875,0.48162 0,0.40249 0.3515625,0 0,-0.60546 z m 4.5412738,-5.37007 0.351562,0 0,0.37296 -0.351562,0 z M 9.4763125,2.18383 9.3005313,2.48828 10.134719,2.9699 l 0,0.40247 0.351562,0 0,-0.60544 z m -3.2244375,1.35539 0.3515625,0 0,0.37296 -0.3515625,0 z M 5.5934922,2.18383 5.4177109,2.48828 6.2518984,2.9699 l 0,0.40247 0.3515625,0 0,-0.60544 z m 6.4826018,4.71773 0.351562,0 0,0.37296 -0.351562,0 z M 11.417711,5.54615 11.24193,5.8506 l 0.834187,0.48162 0,0.40249 0.351563,0 0,-0.60546 z m -0.359109,-0.88978 0,-2.24145 L 8.9413984,1.19254 7,2.31341 5.0586016,1.19254 2.9413984,2.41492 l 0,2.24145 L 1,5.77724 l 0,2.44472 1.9413984,1.12088 0,2.24226 2.1171797,1.22236 L 7,11.68659 l 1.9413984,1.12087 2.1171796,-1.22236 0,-2.24226 L 13,8.22196 13,5.77724 11.058602,4.65637 Z M 7.1757812,2.61789 8.9413984,1.5985 l 1.7656406,1.01939 0,2.03848 -1.7656171,1.01939 -1.7656407,-1.01939 0,-2.03848 z m -3.8827968,0 1.7656172,-1.01939 1.7656171,1.01939 0,2.03848 -1.7656171,1.01939 -1.7656172,-1.01939 0,-2.03848 z m -1.9414219,5.4011 0,-2.03878 1.7653828,-1.01925 1.765875,1.01953 0,2.0385 L 3.1171797,9.03836 1.3515625,8.01899 Z m 5.4726328,3.36312 -1.7656172,1.01939 -1.7656172,-1.01939 0,-2.03876 1.7656172,-1.01939 1.7656172,1.01939 0,2.03876 z m -1.5898125,-3.36314 0,-2.0385 L 7,4.9611 l 1.7656172,1.01939 0,2.0385 L 7,9.03836 5.2343828,8.01897 Z m 3.7070391,4.38253 -1.7656407,-1.01939 0,-2.03876 1.7656172,-1.01939 1.7656176,1.01939 0,2.03876 2.3e-5,0 -1.7656171,1.01939 z M 12.648438,8.01899 10.88282,9.03838 9.1172031,8.01899 l 0,-2.0385 1.7658749,-1.01953 1.76536,1.01925 0,2.03878 z m -4.4552349,-1.11743 0.3515625,0 0,0.37296 -0.3515625,0 z M 7.5349141,5.54615 7.3591328,5.8506 l 0.8341641,0.48162 0,0.40249 0.3515625,0 0,-0.60546 z m -3.2243672,1.35541 0.3515625,0 0,0.37296 -0.3515625,0 z M 3.6520938,5.54615 3.4763125,5.8506 4.3105,6.33222 l 0,0.40249 0.3515625,0 0,-0.60546 z"/>
			</svg>
			lifeos
		</a>
	    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
	      <span class="navbar-toggler-icon"></span>
	    </button>
	    <div class="collapse navbar-collapse" id="navbarSupportedContent">
	      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
	        <li class="nav-item">
	          <a class="nav-link active" aria-current="page" href="#">Dashboard</a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link" href="#">Tasks and Mood</a>
	        </li>
	        <li class="nav-item dropdown">
	          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
	            Integrations
	          </a>
	          <ul class="dropdown-menu">
	            <li><a class="dropdown-item" href="#">Linux</a></li>
	            <li><a class="dropdown-item" href="#">Windows</a></li>
	            <li><a class="dropdown-item" href="#">Android</a></li>
	            <li><hr class="dropdown-divider"></li>
	            <li><a class="dropdown-item" href="#">Steam</a></li>
	            <li><a class="dropdown-item" href="#">GOG</a></li>
	            <li><a class="dropdown-item" href="#">Lutris</a></li>
	            <li><hr class="dropdown-divider"></li>
	            <li><a class="dropdown-item" href="#">Samsung Health</a></li>
	          </ul>
	        </li>
	      </ul>
	      <form class="d-flex" role="search">
	        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search"/>
	        <button class="btn btn-outline-success" type="submit">Search</button>
	      </form>
	    </div>
	  </div>
	</nav>

  	<div id="theBody" class="container-lg" style="border: 1px solid red">
		<!-- data submission -->
		<div class="container">
				<label for="task">Task</label>
				<select name="task" id="task">
					<option value=""></option>
					<option value="android_development">Android Development</option>
					<option value="golang_development">Golang Development</option>
					<option value="security_analysis">Security Analysis</option>
					<option value="gaming">Gaming</option>
				</select>
				<br>
				<span>From</span>
				<input type="time">
				<span>to</span>
				<input
					required
					id="endTime"
					name="endTime"
					type="time">
				<br>
				<label for="mood">Mood:</label>
				<select name="mood" id="mood">
					<option value="happy">Happy</option>
					<option value="neutral">Neutral</option>
					<option value="sad">Sad</option>
				</select>
				<br>
				<div class="form-floating">
					<textarea
						placeholder="Memo"
						id="memo"
						class="form-control mb-3"
						style="height: 100px"></textarea>
					<label for="memo">Memo</label>
				</div>
				<button id="addBtn" class="btn btn-primary">Add</button>
		</div>
		<hr>
		<!-- timeline visualization-->
		<div id="rowContainer" class="container">
			<div class="row">
				<div class="shadow-lg p-3 mb-5"
				     style="border-radius:10px 0px 0px 10px;width:25%;background-color: gray;height:10px;">
				</div>
				<div class="shadow-lg p-3 mb-5"
					 style="position:relative;width:50%;background-color: skyblue;height:10px;">
				</div>
				<div class="shadow-lg p-3 mb-5"
					 style="border-radius:0px 10px 10px 0px;width:25%;background-color: gray;height:10px;">
				</div>
			</div>
		</div>
	</div>


	<!-- TOAST -->
	<div class="toast-container position-fixed bottom-0 end-0 p-3">
  		<div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
  		  <div class="toast-header">
  		    <img src="..." class="rounded me-2" alt="...">
  		    <strong class="me-auto">Bootstrap</strong>
  		    <small>11 mins ago</small>
  		    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
  		  </div>
  		  <div class="toast-body">
  		    Hello, world! This is a toast message.
  		  </div>
  		</div>
	</div>

<script defer>
const d = document;
const ws = new WebSocket("ws://{{ .ServerIP }}:1337/websocket");
ws.addEventListener("message", event => {
	if (event.data == "FILE_CHANGE") {
		location.reload();
	}
})

const timeLines = [
	{ name: "sleep", timeStart: 0, timeEnd: 500, color: "#00FF00" },
	{ name: "japanese", timeStart: 501, timeEnd: 700, color: "#FF0000" },
	{ name: "gaming", timeStart: 650, timeEnd: 800, color: "#0000FF" },
	{ name: "programming", timeStart: 801, timeEnd: 1000, color: "#00FFFF"},
]

const t = d.getElementById("endTime");
t.value = "13:12";

function createDiv(borders, color, size) {
	const div = d.createElement("div");
	div.style.borderRadius = borders;
	div.style.backgroundColor = color;
	div.style.height = "10px";
	div.style.padding = 0;
	div.style.width = size + "%";
	div.classList.add("shadow-lg");
	return div;
}

function renderLines(timeLines) {
	const rowContainer = d.getElementById("rowContainer");
	rowContainer.innerHTML = "";
	for(let i = 0; i < timeLines.length; i++) {
		const taskTime = timeLines[i].timeEnd - timeLines[i].timeStart;
		const taskVisualSize = taskTime / 1440 * 100;
		const gray1Size = timeLines[i].timeStart / 1440 * 100;
		const gray2Size = 100 - gray1Size - taskVisualSize;

		const gray = createDiv("10px 0px 0px 10px", "gray", gray1Size);
		const gray2 = createDiv("0px 10px 10px 0px", "gray", gray2Size);
		const skyblue = createDiv("0px 0px 0px 0px", "skyblue", taskVisualSize);

		const newRow = d.createElement("div");
		newRow.classList.add("row");
		newRow.style.marginBottom = "8px";
		newRow.appendChild(gray);
		newRow.appendChild(skyblue);
		newRow.appendChild(gray2);
		newRow.title = `${timeLines[i].name}: ${timeLines[i].timeStart} -> ${timeLines[i].timeEnd}`

		rowContainer.appendChild(newRow);
	}
}
renderLines(timeLines);

</script>
<script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1/dist/es-module-shims.min.js" crossorigin="anonymous"></script>
<script type="importmap">
{
  "imports": {
    "@popperjs/core": "https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/esm/popper.min.js",
    "bootstrap": "https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.esm.min.js"
  }
}
</script>
<script type="module">
import * as bootstrap from 'bootstrap'

// initializing the toast
const addBtn = d.getElementById("addBtn");
const toast = d.getElementById("toast");

if (addBtn) {
	const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toast);
	addBtn.addEventListener("click", _ => {
		toastBootstrap.show();
	});
}
</script>
  </body>
</html>
